{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/components/ChatWidget.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface Message {\n  role: \"user\" | \"bot\";\n  text: string;\n}\n\nexport default function ChatWidget() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    { role: \"bot\", text: \"Hello! üëã I am your AI Tutor. Select a subject and ask me anything!\" }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [subject, setSubject] = useState(\"Python\"); // Default Subject\n  const [loading, setLoading] = useState(false);\n  \n  // Auto-scroll to bottom\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n  useEffect(scrollToBottom, [messages]);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    // 1. User message add karein\n    const userMsg = input;\n    setMessages((prev) => [...prev, { role: \"user\", text: userMsg }]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      // 2. Backend API call karein\n      const res = await axios.post(`${process.env.NEXT_PUBLIC_API_URL}/ask-tutor`, {\n        subject: subject,\n        question: userMsg\n      });\n\n      // 3. Bot response add karein\n      setMessages((prev) => [...prev, { role: \"bot\", text: res.data.answer }]);\n\n    } catch (error) {\n      setMessages((prev) => [...prev, { role: \"bot\", text: \"Sorry, I am having trouble connecting to the brain. üß†\" }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed bottom-5 right-5 z-50 flex flex-col items-end\">\n      \n      {/* Chat Box (Hidden/Visible logic) */}\n      {isOpen && (\n        <div className=\"bg-white w-80 h-96 rounded-lg shadow-2xl border border-gray-200 flex flex-col mb-4 overflow-hidden\">\n          \n          {/* Header */}\n          <div className=\"bg-blue-600 text-white p-3 flex justify-between items-center\">\n            <h3 className=\"font-bold\">ü§ñ AI Tutor</h3>\n            <button onClick={() => setIsOpen(false)} className=\"text-white hover:text-gray-200\">‚úï</button>\n          </div>\n\n          {/* Subject Selector */}\n          <div className=\"bg-gray-100 p-2 border-b\">\n            <select \n              value={subject} \n              onChange={(e) => setSubject(e.target.value)}\n              className=\"w-full p-1 rounded border text-sm text-gray-700\"\n            >\n              <option value=\"Python\">Python Programming</option>\n              <option value=\"Physics\">Physics</option>\n              <option value=\"Math\">Mathematics</option>\n              <option value=\"General\">General Doubts</option>\n            </select>\n          </div>\n\n          {/* Messages Area */}\n          <div className=\"flex-1 p-3 overflow-y-auto bg-gray-50\">\n            {messages.map((msg, idx) => (\n              <div key={idx} className={`mb-2 flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n                <div className={`max-w-[80%] p-2 rounded-lg text-sm ${\n                  msg.role === \"user\" \n                    ? \"bg-blue-500 text-white rounded-br-none\" \n                    : \"bg-white border text-gray-800 rounded-bl-none shadow-sm\"\n                }`}>\n                  {msg.text}\n                </div>\n              </div>\n            ))}\n            {loading && <div className=\"text-xs text-gray-400 ml-2\">Thinking... ü§î</div>}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input Area */}\n          <div className=\"p-2 border-t bg-white flex gap-2\">\n            <input\n              type=\"text\"\n              className=\"flex-1 border rounded px-2 py-1 text-sm focus:outline-none focus:border-blue-500 text-black\"\n              placeholder=\"Ask a doubt...\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={(e) => e.key === \"Enter\" && sendMessage()}\n            />\n            <button \n              onClick={sendMessage} \n              disabled={loading}\n              className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:bg-gray-400\"\n            >\n              Send\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Toggle Button (Hamesha dikhega) */}\n      <button \n        onClick={() => setIsOpen(!isOpen)}\n        className=\"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-all transform hover:scale-110 flex items-center justify-center\"\n      >\n        {isOpen ? \"‚¨áÔ∏è\" : \"üí¨ AI Help\"}\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/navigation\";\nimport ChatWidget from \"../components/ChatWidget\"; // <--- Import Chatbot\n\ninterface ContentItem {\n  title: string;\n  access: \"LOCKED üîí\" | \"OPEN ‚úÖ\";\n  url: string | null;\n  content_type: string; // Add logic backend to send 'video' or 'pdf'\n}\n\nexport default function Dashboard() {\n  const [content, setContent] = useState<ContentItem[]>([]);\n  const [selectedVideo, setSelectedVideo] = useState<string | null>(null); // For Video Player\n  const router = useRouter();\n  const token = Cookies.get(\"token\");\n\n  useEffect(() => {\n    if (!token) { router.push(\"/login\"); return; }\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () => {\n    try {\n      const res = await axios.get<ContentItem[]>(\n        `${process.env.NEXT_PUBLIC_API_URL}/study-material/1`, \n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setContent(res.data);\n    } catch (error) { console.error(error); }\n  };\n\n  const buySubscription = async () => {\n    try {\n      await axios.post(`${process.env.NEXT_PUBLIC_API_URL}/buy-subscription/?plan_id=1`, {}, { headers: { Authorization: `Bearer ${token}` } });\n      alert(\"Plan Purchased! üéâ\");\n      fetchContent();\n    } catch (error) { alert(\"Failed\"); }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 relative\">\n      \n      {/* Navbar type header */}\n      <div className=\"bg-white shadow p-4 flex justify-between items-center sticky top-0 z-10\">\n        <h1 className=\"text-2xl font-bold text-blue-700\">EduStream Dashboard</h1>\n        <button onClick={() => { Cookies.remove('token'); router.push('/login'); }} className=\"text-red-500 font-semibold\">Logout</button>\n      </div>\n\n      <div className=\"max-w-5xl mx-auto p-6\">\n        {/* Subscription Banner */}\n        <div className=\"bg-gradient-to-r from-yellow-100 to-yellow-200 p-6 rounded-xl shadow-sm mb-8 flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-lg font-bold text-yellow-800\">Unlock Premium Access üîì</h2>\n            <p className=\"text-yellow-700 text-sm\">Get unlimited access to AI Tutor and HD Videos.</p>\n          </div>\n          <button onClick={buySubscription} className=\"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition\">\n            Buy Premium (‚Çπ499)\n          </button>\n        </div>\n\n        {/* Content Grid */}\n        <h2 className=\"text-xl font-bold mb-4 text-gray-700\">Course Content: Python</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {content.map((item, index) => (\n            <div key={index} className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition\">\n              <div className=\"h-32 bg-gray-100 rounded-lg mb-4 flex items-center justify-center text-4xl\">\n                {item.content_type === \"video\" ? \"üé•\" : \"üìÑ\"}\n              </div>\n              <h3 className=\"font-semibold text-gray-800 mb-2 truncate\">{item.title}</h3>\n              \n              {item.access.includes(\"LOCKED\") ? (\n                <button disabled className=\"w-full bg-gray-200 text-gray-500 py-2 rounded-lg cursor-not-allowed flex justify-center items-center gap-2\">\n                  <span>Locked</span> üîí\n                </button>\n              ) : (\n                <button \n                  onClick={() => {\n                     // Agar video hai to player kholo, nahi to link\n                     if(item.url) setSelectedVideo(item.url); \n                  }}\n                  className=\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition\"\n                >\n                  Play Video ‚ñ∂\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* VIDEO PLAYER MODAL (Popup) */}\n      {selectedVideo && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-black w-full max-w-4xl rounded-lg overflow-hidden relative shadow-2xl\">\n            <button \n              onClick={() => setSelectedVideo(null)}\n              className=\"absolute top-4 right-4 text-white text-2xl font-bold hover:text-red-500 z-10 bg-black/50 px-3 rounded-full\"\n            >\n              ‚úï\n            </button>\n            <video controls autoPlay className=\"w-full h-auto max-h-[80vh]\">\n              <source src={selectedVideo} type=\"video/mp4\" />\n              Your browser does not support the video tag.\n            </video>\n          </div>\n        </div>\n      )}\n\n      {/* AI CHATBOT WIDGET */}\n      <ChatWidget />\n      \n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA,kOAAmD,sBAAsB;AALzE;;;;;;;AAce,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IACxD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB,OAAO,mBAAmB;IAC5F,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,QAAQ,gKAAO,CAAC,GAAG,CAAC;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC;YAAW;QAAQ;QAC7C;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,MAAM,gJAAK,CAAC,GAAG,CACzB,6DAAmC,iBAAiB,CAAC,EACrD;gBAAE,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAAE;YAElD,WAAW,IAAI,IAAI;QACrB,EAAE,OAAO,OAAO;YAAE,QAAQ,KAAK,CAAC;QAAQ;IAC1C;IAEA,MAAM,kBAAkB;QACtB,IAAI;YACF,MAAM,gJAAK,CAAC,IAAI,CAAC,6DAAmC,4BAA4B,CAAC,EAAE,CAAC,GAAG;gBAAE,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAAE;YACvI,MAAM;YACN;QACF,EAAE,OAAO,OAAO;YAAE,MAAM;QAAW;IACrC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAGb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAO,SAAS;4BAAQ,gKAAO,CAAC,MAAM,CAAC;4BAAU,OAAO,IAAI,CAAC;wBAAW;wBAAG,WAAU;kCAA6B;;;;;;;;;;;;0BAGrH,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAoC;;;;;;kDAClD,8OAAC;wCAAE,WAAU;kDAA0B;;;;;;;;;;;;0CAEzC,8OAAC;gCAAO,SAAS;gCAAiB,WAAU;0CAAwE;;;;;;;;;;;;kCAMtH,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCACrD,8OAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,MAAM,sBAClB,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC;wCAAI,WAAU;kDACZ,KAAK,YAAY,KAAK,UAAU,OAAO;;;;;;kDAE1C,8OAAC;wCAAG,WAAU;kDAA6C,KAAK,KAAK;;;;;;oCAEpE,KAAK,MAAM,CAAC,QAAQ,CAAC,0BACpB,8OAAC;wCAAO,QAAQ;wCAAC,WAAU;;0DACzB,8OAAC;0DAAK;;;;;;4CAAa;;;;;;6DAGrB,8OAAC;wCACC,SAAS;4CACN,+CAA+C;4CAC/C,IAAG,KAAK,GAAG,EAAE,iBAAiB,KAAK,GAAG;wCACzC;wCACA,WAAU;kDACX;;;;;;;+BAjBK;;;;;;;;;;;;;;;;YA2Bf,+BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,iBAAiB;4BAChC,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BAAM,QAAQ;4BAAC,QAAQ;4BAAC,WAAU;;8CACjC,8OAAC;oCAAO,KAAK;oCAAe,MAAK;;;;;;gCAAc;;;;;;;;;;;;;;;;;;0BAQvD,8OAAC,2IAAU;;;;;;;;;;;AAIjB"}}]
}