{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from 'react';\n// import { useRouter } from 'next/navigation';\n\n// Mock useRouter for this preview environment since 'next/navigation' is not available here\nconst useRouter = () => ({\n  push: (path: string) => {\n    console.log(`Navigating to ${path}`);\n    // In your real Next.js app, this happens automatically\n  }\n});\n\n// API Response ka Type define kiya (TypeScript Best Practice)\ninterface AuthResponse {\n  status: string;\n  role?: string;\n  token?: string;\n  detail?: string;\n}\n\nexport default function LoginPage() {\n  // State variables with Types\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [role, setRole] = useState<string>(\"student\");\n  const [isRegistering, setIsRegistering] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errorMsg, setErrorMsg] = useState<string>(\"\");\n  \n  const router = useRouter();\n\n  const handleAuth = async () => {\n    // 1. Validation\n    if (!email || !password) {\n      setErrorMsg(\"Please fill all fields\");\n      return;\n    }\n\n    setLoading(true);\n    setErrorMsg(\"\"); // Clear previous errors\n\n    const endpoint = isRegistering ? \"/register\" : \"/login\";\n    \n    try {\n      // FIX: Changed 'localhost' to '127.0.0.1' to match Uvicorn's IPv4 default\n      // Note: This fetch might fail in the web preview due to HTTPS/HTTP mixed content blocking.\n      // It works when running both frontend and backend locally.\n      const res = await fetch(`http://127.0.0.1:8000${endpoint}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password, role }),\n      });\n\n      // Type Assertion (TS ko bata rahe hain ki response kaisa hoga)\n      const data: AuthResponse = await res.json();\n\n      if (res.ok) {\n        alert(data.status); // Use a toast notification in production ideally\n        if (!isRegistering) {\n          // Login Success\n          if (data.role) {\n            localStorage.setItem(\"userRole\", data.role);\n            // Optional: Store token if your backend sends one\n            if (data.token) localStorage.setItem(\"token\", data.token); \n            \n            console.log(\"Redirecting to dashboard...\");\n            router.push(\"/dashboard\");\n          }\n        } else {\n          // Registration Success -> Switch to Login\n          setIsRegistering(false);\n        }\n      } else {\n        setErrorMsg(data.detail || \"Something went wrong\");\n      }\n    } catch (error) {\n      console.error(\"Connection Error:\", error);\n      \n      // Better error handling for Network Errors\n      let msg = \"Connection failed.\";\n      if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n        msg = \"Network Error: Browser blocked the request. Try running this frontend code locally (npm run dev) to connect to your local backend.\";\n      } else {\n        msg = \"Connection failed. Is the Backend terminal running?\";\n      }\n      \n      setErrorMsg(msg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-900 text-white p-4\">\n      <div className=\"bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-md border border-gray-700\">\n        <h1 className=\"text-3xl font-bold mb-6 text-center text-blue-400\">\n          {isRegistering ? \"Join EduStream\" : \"Welcome Back\"}\n        </h1>\n\n        {/* Error Box */}\n        {errorMsg && (\n          <div className=\"bg-red-500/20 border border-red-500 text-red-200 p-3 rounded mb-4 text-sm text-center\">\n            {errorMsg}\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          <input \n            className=\"w-full p-3 bg-gray-700 rounded text-white outline-none focus:ring-2 focus:ring-blue-500\" \n            placeholder=\"Email\" \n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)} \n          />\n          <input \n            className=\"w-full p-3 bg-gray-700 rounded text-white outline-none focus:ring-2 focus:ring-blue-500\" \n            type=\"password\" \n            placeholder=\"Password\" \n            value={password}\n            onChange={(e) => setPassword(e.target.value)} \n          />\n\n          {isRegistering && (\n            <select \n              className=\"w-full p-3 bg-gray-700 rounded text-white outline-none focus:ring-2 focus:ring-blue-500\" \n              value={role}\n              onChange={(e) => setRole(e.target.value)}\n            >\n              <option value=\"student\">I am a Student</option>\n              <option value=\"trainer\">I am a Trainer</option>\n            </select>\n          )}\n\n          <button \n            onClick={handleAuth} \n            disabled={loading}\n            className={`w-full p-3 rounded font-bold transition ${loading ? 'bg-gray-600' : 'bg-blue-600 hover:bg-blue-500'}`}\n          >\n            {loading ? \"Processing...\" : (isRegistering ? \"Sign Up\" : \"Login\")}\n          </button>\n        </div>\n\n        <p className=\"mt-6 text-center text-gray-400 text-sm cursor-pointer hover:text-white\" onClick={() => setIsRegistering(!isRegistering)}>\n          {isRegistering ? \"Already have an account? Login\" : \"New here? Create Account\"}\n        </p>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAEA,+CAA+C;AAE/C,4FAA4F;AAC5F,MAAM,YAAY,IAAM,CAAC;QACvB,MAAM,CAAC;YACL,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,MAAM;QACnC,uDAAuD;QACzD;IACF,CAAC;AAUc,SAAS;IACtB,6BAA6B;IAC7B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAS;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAS;IACzC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAU;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAChD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAS;IAEjD,MAAM,SAAS;IAEf,MAAM,aAAa;QACjB,gBAAgB;QAChB,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,YAAY;YACZ;QACF;QAEA,WAAW;QACX,YAAY,KAAK,wBAAwB;QAEzC,MAAM,WAAW,gBAAgB,cAAc;QAE/C,IAAI;YACF,0EAA0E;YAC1E,2FAA2F;YAC3F,2DAA2D;YAC3D,MAAM,MAAM,MAAM,MAAM,CAAC,qBAAqB,EAAE,UAAU,EAAE;gBAC1D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;oBAAU;gBAAK;YAC/C;YAEA,+DAA+D;YAC/D,MAAM,OAAqB,MAAM,IAAI,IAAI;YAEzC,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,KAAK,MAAM,GAAG,iDAAiD;gBACrE,IAAI,CAAC,eAAe;oBAClB,gBAAgB;oBAChB,IAAI,KAAK,IAAI,EAAE;wBACb,aAAa,OAAO,CAAC,YAAY,KAAK,IAAI;wBAC1C,kDAAkD;wBAClD,IAAI,KAAK,KAAK,EAAE,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;wBAExD,QAAQ,GAAG,CAAC;wBACZ,OAAO,IAAI,CAAC;oBACd;gBACF,OAAO;oBACL,0CAA0C;oBAC1C,iBAAiB;gBACnB;YACF,OAAO;gBACL,YAAY,KAAK,MAAM,IAAI;YAC7B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qBAAqB;YAEnC,2CAA2C;YAC3C,IAAI,MAAM;YACV,IAAI,iBAAiB,aAAa,MAAM,OAAO,CAAC,QAAQ,CAAC,UAAU;gBACjE,MAAM;YACR,OAAO;gBACL,MAAM;YACR;YAEA,YAAY;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BACX,gBAAgB,mBAAmB;;;;;;gBAIrC,0BACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCAE1C,8OAAC;4BACC,WAAU;4BACV,MAAK;4BACL,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;wBAG5C,+BACC,8OAAC;4BACC,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;8CAEvC,8OAAC;oCAAO,OAAM;8CAAU;;;;;;8CACxB,8OAAC;oCAAO,OAAM;8CAAU;;;;;;;;;;;;sCAI5B,8OAAC;4BACC,SAAS;4BACT,UAAU;4BACV,WAAW,CAAC,wCAAwC,EAAE,UAAU,gBAAgB,iCAAiC;sCAEhH,UAAU,kBAAmB,gBAAgB,YAAY;;;;;;;;;;;;8BAI9D,8OAAC;oBAAE,WAAU;oBAAyE,SAAS,IAAM,iBAAiB,CAAC;8BACpH,gBAAgB,mCAAmC;;;;;;;;;;;;;;;;;AAK9D"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}