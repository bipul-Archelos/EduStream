{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/admin/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function AdminDashboard() {\n  const [activeTab, setActiveTab] = useState(\"subject\"); // 'subject' or 'content'\n  const [loading, setLoading] = useState(false);\n  const token = Cookies.get(\"token\");\n  const router = useRouter();\n\n  // Subject Form State\n  const [subjectName, setSubjectName] = useState(\"\");\n\n  // Content Form State\n  const [title, setTitle] = useState(\"\");\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [contentType, setContentType] = useState(\"video\");\n  const [subjectId, setSubjectId] = useState(\"1\");\n  const [isPremium, setIsPremium] = useState(true);\n\n  // --- 1. Create Subject ---\n  const handleCreateSubject = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await axios.post(\n        `${process.env.NEXT_PUBLIC_API_URL}/subjects/`,\n        null, // No body needed, query param use kiya tha backend mein\n        {\n          params: { name: subjectName },\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      alert(\"‚úÖ Subject Created!\");\n      setSubjectName(\"\");\n    } catch (error) {\n      alert(\"‚ùå Failed. Check if you are Admin.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- 2. Upload Content ---\n  const handleAddContent = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await axios.post(\n        `${process.env.NEXT_PUBLIC_API_URL}/content/`,\n        null,\n        {\n          params: {\n            title: title,\n            file_url: fileUrl,\n            type: contentType,\n            subject_id: subjectId,\n            is_premium: isPremium,\n          },\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      alert(\"‚úÖ Content Uploaded Successfully!\");\n      setTitle(\"\");\n      setFileUrl(\"\");\n    } catch (error) {\n      alert(\"‚ùå Upload Failed.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-10 font-sans\">\n      <div className=\"max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden\">\n        \n        {/* Header */}\n        <div className=\"bg-gray-900 text-white p-6 flex justify-between items-center\">\n          <h1 className=\"text-2xl font-bold\">üõ†Ô∏è Admin Control Panel</h1>\n          <button onClick={() => router.push('/dashboard')} className=\"text-sm text-gray-300 hover:text-white\">Go to App ‚Üí</button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b\">\n          <button \n            onClick={() => setActiveTab(\"subject\")}\n            className={`flex-1 py-4 font-bold text-center ${activeTab === 'subject' ? 'bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500 hover:bg-gray-50'}`}\n          >\n            Add New Subject\n          </button>\n          <button \n            onClick={() => setActiveTab(\"content\")}\n            className={`flex-1 py-4 font-bold text-center ${activeTab === 'content' ? 'bg-indigo-50 text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500 hover:bg-gray-50'}`}\n          >\n            Upload Video / PDF\n          </button>\n        </div>\n\n        {/* Forms */}\n        <div className=\"p-8\">\n          \n          {/* --- SUBJECT FORM --- */}\n          {activeTab === \"subject\" && (\n            <form onSubmit={handleCreateSubject} className=\"space-y-6 max-w-lg mx-auto\">\n              <div>\n                <label className=\"block text-gray-700 font-bold mb-2\">Subject Name</label>\n                <input \n                  className=\"w-full border p-3 rounded text-black\" \n                  placeholder=\"e.g. Data Structures\"\n                  value={subjectName}\n                  onChange={(e) => setSubjectName(e.target.value)}\n                  required\n                />\n              </div>\n              <button disabled={loading} className=\"w-full bg-indigo-600 text-white py-3 rounded font-bold hover:bg-indigo-700\">\n                {loading ? \"Creating...\" : \"Create Subject\"}\n              </button>\n            </form>\n          )}\n\n          {/* --- CONTENT FORM --- */}\n          {activeTab === \"content\" && (\n            <form onSubmit={handleAddContent} className=\"space-y-4 max-w-lg mx-auto\">\n              <div>\n                <label className=\"block text-gray-700 font-bold mb-1\">Content Title</label>\n                <input \n                  className=\"w-full border p-2 rounded text-black\" \n                  placeholder=\"e.g. Python Loop Tutorial\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-gray-700 font-bold mb-1\">File URL (Video/PDF Link)</label>\n                <input \n                  className=\"w-full border p-2 rounded text-black\" \n                  placeholder=\"https://...\"\n                  value={fileUrl}\n                  onChange={(e) => setFileUrl(e.target.value)}\n                  required\n                />\n              </div>\n\n              <div className=\"flex gap-4\">\n                <div className=\"flex-1\">\n                  <label className=\"block text-gray-700 font-bold mb-1\">Type</label>\n                  <select \n                    className=\"w-full border p-2 rounded text-black\"\n                    value={contentType}\n                    onChange={(e) => setContentType(e.target.value)}\n                  >\n                    <option value=\"video\">Video üé•</option>\n                    <option value=\"pdf\">PDF Notes üìÑ</option>\n                  </select>\n                </div>\n                <div className=\"flex-1\">\n                  <label className=\"block text-gray-700 font-bold mb-1\">Subject ID</label>\n                  <input \n                    type=\"number\"\n                    className=\"w-full border p-2 rounded text-black\" \n                    placeholder=\"e.g. 1\"\n                    value={subjectId}\n                    onChange={(e) => setSubjectId(e.target.value)}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2 bg-yellow-50 p-3 rounded border border-yellow-200\">\n                <input \n                  type=\"checkbox\" \n                  id=\"prem\"\n                  checked={isPremium}\n                  onChange={(e) => setIsPremium(e.target.checked)}\n                  className=\"w-5 h-5 text-indigo-600\"\n                />\n                <label htmlFor=\"prem\" className=\"text-gray-800 font-semibold cursor-pointer\">\n                  Is Premium Content? (Lock for free users)\n                </label>\n              </div>\n\n              <button disabled={loading} className=\"w-full bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700\">\n                {loading ? \"Uploading...\" : \"Upload Content\"}\n              </button>\n            </form>\n          )}\n\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}