{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/teacher/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/navigation\";\nimport { JitsiMeeting } from \"@jitsi/react-sdk\";\n\nexport default function TeacherDashboard() {\n  const [activeTab, setActiveTab] = useState(\"live\"); // 'live' or 'upload'\n  const [loading, setLoading] = useState(false);\n  \n  // Live Class Form\n  const [classTitle, setClassTitle] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [isClassStarted, setIsClassStarted] = useState(false);\n\n  // Upload Content Form\n  const [contentTitle, setContentTitle] = useState(\"\");\n  const [fileUrl, setFileUrl] = useState(\"\");\n  const [contentType, setContentType] = useState(\"video\");\n  const [subjectId, setSubjectId] = useState(\"1\"); // Default Subject ID 1\n\n  const router = useRouter();\n  const token = Cookies.get(\"token\");\n\n  // --- 1. START LIVE CLASS ---\n  const handleStartClass = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      // Backend ko batao ki class shuru ho gayi\n      await axios.post(\n        `${process.env.NEXT_PUBLIC_API_URL}/live-sessions/`,\n        {\n          title: classTitle,\n          stream_link: roomName, // Jitsi Room Name\n          subject_id: Number(subjectId)\n        },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      alert(\"üî¥ Class Started! You are now Live.\");\n      setIsClassStarted(true); // Jitsi Player Show karega\n    } catch (error) {\n      alert(\"‚ùå Error: Login as Admin/Teacher first.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- 2. UPLOAD CONTENT ---\n  const handleUpload = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await axios.post(\n        `${process.env.NEXT_PUBLIC_API_URL}/content/`,\n        null,\n        {\n          params: {\n            title: contentTitle,\n            file_url: fileUrl,\n            type: contentType,\n            subject_id: subjectId,\n            is_premium: true,\n          },\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      alert(\"‚úÖ Content Uploaded!\");\n      setContentTitle(\"\");\n      setFileUrl(\"\");\n    } catch (error) {\n      alert(\"‚ùå Upload Failed.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col font-sans\">\n      \n      {/* Header */}\n      <div className=\"bg-indigo-900 text-white p-4 flex justify-between items-center shadow-lg\">\n        <h1 className=\"text-xl font-bold\">üë®‚Äçüè´ Trainer Dashboard</h1>\n        <div className=\"flex gap-4\">\n            <button onClick={() => setIsClassStarted(false)} className=\"bg-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-600\">Stop Class</button>\n            <button onClick={() => router.push('/dashboard')} className=\"bg-indigo-600 px-3 py-1 rounded text-sm hover:bg-indigo-500\">View App</button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex bg-white shadow-sm mb-6\">\n        <button \n          onClick={() => { setActiveTab(\"live\"); setIsClassStarted(false); }}\n          className={`flex-1 py-4 font-bold ${activeTab === 'live' ? 'text-red-600 border-b-2 border-red-600' : 'text-gray-500'}`}\n        >\n          üî¥ Go Live\n        </button>\n        <button \n          onClick={() => setActiveTab(\"upload\")}\n          className={`flex-1 py-4 font-bold ${activeTab === 'upload' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500'}`}\n        >\n          üì§ Upload Material\n        </button>\n      </div>\n\n      {/* --- LIVE CLASS SECTION --- */}\n      {activeTab === \"live\" && (\n        <div className=\"flex-1 flex flex-col items-center p-4\">\n          \n          {!isClassStarted ? (\n            // Form to Start Class\n            <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\n              <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">Start a Live Session</h2>\n              <form onSubmit={handleStartClass} className=\"space-y-4\">\n                <div>\n                  <label className=\"block font-semibold mb-1 text-black\">Class Title</label>\n                  <input \n                    className=\"w-full border p-2 rounded text-black\" \n                    placeholder=\"e.g. Python Doubt Session\"\n                    value={classTitle}\n                    onChange={(e) => setClassTitle(e.target.value)}\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block font-semibold mb-1 text-black\">Room Name (Unique)</label>\n                  <input \n                    className=\"w-full border p-2 rounded text-black\" \n                    placeholder=\"e.g. ClassRoom101\"\n                    value={roomName}\n                    onChange={(e) => setRoomName(e.target.value)}\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Students will join using this room name.</p>\n                </div>\n                <div>\n                  <label className=\"block font-semibold mb-1 text-black\">Subject ID</label>\n                  <input \n                    type=\"number\" \n                    className=\"w-full border p-2 rounded text-black\" \n                    value={subjectId}\n                    onChange={(e) => setSubjectId(e.target.value)}\n                    required\n                  />\n                </div>\n                <button disabled={loading} className=\"w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition\">\n                  {loading ? \"Starting...\" : \"üöÄ GO LIVE NOW\"}\n                </button>\n              </form>\n            </div>\n          ) : (\n            // JITSI MEETING (Teacher View)\n            <div className=\"w-full h-[80vh] bg-black rounded-xl overflow-hidden shadow-2xl relative\">\n               <JitsiMeeting\n                domain=\"meet.jit.si\"\n                roomName={roomName}\n                configOverwrite={{\n                  startWithAudioMuted: true,\n                  disableThirdPartyRequests: true,\n                  prejoinPageEnabled: false,\n                }}\n                interfaceConfigOverwrite={{\n                   TOOLBAR_BUTTONS: [\n                    'microphone', 'camera', 'closedcaptions', 'desktop', 'fullscreen',\n                    'fodeviceselection', 'hangup', 'profile', 'chat', 'recording',\n                    'livestreaming', 'etherpad', 'sharedvideo', 'settings', 'raisehand',\n                    'videoquality', 'filmstrip', 'feedback', 'stats', 'shortcuts',\n                    'tileview', 'videobackgroundblur', 'download', 'help', 'mute-everyone',\n                    'security' // Teacher needs Security options (Kick/Mute)\n                  ],\n                }}\n                userInfo={{\n                  displayName: \"Teacher (Host)\"\n                }}\n                getIFrameRef={(iframeRef) => { iframeRef.style.height = \"100%\"; }}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* --- UPLOAD SECTION --- */}\n      {activeTab === \"upload\" && (\n        <div className=\"flex justify-center p-6\">\n          <form onSubmit={handleUpload} className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-lg space-y-4\">\n            <h2 className=\"text-xl font-bold text-gray-800\">Upload Study Material</h2>\n            <input \n              className=\"w-full border p-2 rounded text-black\" \n              placeholder=\"Title\" \n              value={contentTitle} onChange={(e) => setContentTitle(e.target.value)} required \n            />\n            <input \n              className=\"w-full border p-2 rounded text-black\" \n              placeholder=\"File/Video URL\" \n              value={fileUrl} onChange={(e) => setFileUrl(e.target.value)} required \n            />\n            <select \n              className=\"w-full border p-2 rounded text-black\"\n              value={contentType} onChange={(e) => setContentType(e.target.value)}\n            >\n              <option value=\"video\">Video</option>\n              <option value=\"pdf\">PDF</option>\n            </select>\n            <input \n              type=\"number\" className=\"w-full border p-2 rounded text-black\"\n              placeholder=\"Subject ID (1)\" \n              value={subjectId} onChange={(e) => setSubjectId(e.target.value)} required \n            />\n            <button className=\"w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700\">\n              Upload Content\n            </button>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}