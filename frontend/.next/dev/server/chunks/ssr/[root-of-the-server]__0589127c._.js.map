{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///home/hackos/html/EduStream/frontend/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useRouter } from \"next/navigation\";\n\n// Define the shape of data coming from API\ninterface ContentItem {\n  title: string;\n  access: \"LOCKED ðŸ”’\" | \"OPEN âœ…\";\n  url: string | null;\n}\n\nexport default function Dashboard() {\n  const [content, setContent] = useState<ContentItem[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const router = useRouter();\n  \n  // Token type check karne ki zaroorat nahi, string | undefined hota hai\n  const token = Cookies.get(\"token\");\n\n  useEffect(() => {\n    if (!token) {\n      router.push(\"/login\");\n      return;\n    }\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () => {\n    try {\n      // Backend URL (Assuming Subject ID 1 for testing)\n      const res = await axios.get<ContentItem[]>(\n        `${process.env.NEXT_PUBLIC_API_URL}/study-material/1`, \n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      setContent(res.data);\n    } catch (error) {\n      console.error(\"Error fetching content\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const buySubscription = async () => {\n    try {\n      await axios.post(\n        `${process.env.NEXT_PUBLIC_API_URL}/buy-subscription/?plan_id=1`,\n        {}, // Empty body\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      alert(\"Plan Purchased! Unlocking content... ðŸŽ‰\");\n      fetchContent(); // Refresh content instantly\n    } catch (error) {\n      alert(\"Purchase Failed. Try again.\");\n    }\n  };\n\n  if (loading) return <div className=\"p-10 text-center\">Loading your classroom...</div>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-10\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-800\">Learning Dashboard ðŸ“š</h1>\n          <button \n            onClick={() => { Cookies.remove('token'); router.push('/login'); }}\n            className=\"text-red-500 hover:text-red-700 font-medium\"\n          >\n            Logout\n          </button>\n        </div>\n\n        {/* Subscription Banner */}\n        <div className=\"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-8 flex justify-between items-center\">\n          <p>Get access to all premium videos & notes.</p>\n          <button \n            onClick={buySubscription}\n            className=\"bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700 transition\"\n          >\n            Buy Premium (â‚¹499)\n          </button>\n        </div>\n\n        {/* Content Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {content.map((item, index) => (\n            <div key={index} className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-between\">\n              <h3 className=\"font-semibold text-lg text-gray-800 mb-2\">{item.title}</h3>\n              \n              <div className=\"mt-4\">\n                {item.access.includes(\"LOCKED\") ? (\n                  <div className=\"flex items-center text-gray-400 bg-gray-100 px-3 py-2 rounded\">\n                    <span className=\"mr-2\">ðŸ”’</span> Premium Only\n                  </div>\n                ) : (\n                  <a \n                    href={item.url || \"#\"} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"block text-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n                  >\n                    Open Content ðŸš€\n                  </a>\n                )}\n              </div>\n            </div>\n          ))}\n\n          {content.length === 0 && (\n            <p className=\"text-gray-500\">No content found for this subject.</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAae,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAChD,MAAM,SAAS,IAAA,+IAAS;IAExB,uEAAuE;IACvE,MAAM,QAAQ,gKAAO,CAAC,GAAG,CAAC;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,CAAC;YACZ;QACF;QACA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI;YACF,kDAAkD;YAClD,MAAM,MAAM,MAAM,gJAAK,CAAC,GAAG,CACzB,6DAAmC,iBAAiB,CAAC,EACrD;gBACE,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAC9C;YAEF,WAAW,IAAI,IAAI;QACrB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI;YACF,MAAM,gJAAK,CAAC,IAAI,CACd,6DAAmC,4BAA4B,CAAC,EAChE,CAAC,GACD;gBAAE,SAAS;oBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAAC;YAAE;YAElD,MAAM;YACN,gBAAgB,4BAA4B;QAC9C,EAAE,OAAO,OAAO;YACd,MAAM;QACR;IACF;IAEA,IAAI,SAAS,qBAAO,8OAAC;QAAI,WAAU;kBAAmB;;;;;;IAEtD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,8OAAC;4BACC,SAAS;gCAAQ,gKAAO,CAAC,MAAM,CAAC;gCAAU,OAAO,IAAI,CAAC;4BAAW;4BACjE,WAAU;sCACX;;;;;;;;;;;;8BAMH,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAE;;;;;;sCACH,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;8BAMH,8OAAC;oBAAI,WAAU;;wBACZ,QAAQ,GAAG,CAAC,CAAC,MAAM,sBAClB,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC;wCAAG,WAAU;kDAA4C,KAAK,KAAK;;;;;;kDAEpE,8OAAC;wCAAI,WAAU;kDACZ,KAAK,MAAM,CAAC,QAAQ,CAAC,0BACpB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAO;;;;;;gDAAS;;;;;;iEAGlC,8OAAC;4CACC,MAAM,KAAK,GAAG,IAAI;4CAClB,QAAO;4CACP,KAAI;4CACJ,WAAU;sDACX;;;;;;;;;;;;+BAdG;;;;;wBAsBX,QAAQ,MAAM,KAAK,mBAClB,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;;;;;;;;;;;;AAMzC"}}]
}